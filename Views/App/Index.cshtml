@{
    ViewBag.Title = "Smapme Index";
}



<nav class="navbar navbar-default">
    <div class="navbar-header">
        <a class="navbar-brand" href="/">Smapme</a>
    </div>
    <div class="container">
        <button type="button" class="btn btn-default  navbar-btn">Sign in</button>
    </div>
</nav>
<div class="container">
    <div class="row">
        <div class="col-md-4">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <span>Add new trip :</span>
                </div>
                <div class="panel-body">
                    <form>
                        <div class="form-group">
                            <label>Location</label>
                            <input class="form-control" />
                        </div>
                        <div class="form-group">
                            <label>Date</label>
                            <input class="form-control" />
                        </div>
                        <input type="submit" value="Add" class="btn btn-primary" />
                    </form>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <span>Add stops :</span>
                </div>
                <div class="panel-body">
                    @*<form>
                        <div class="form-group">
                            <label>Name</label>
                            <input class="form-control" />
                        </div>
                        <div class="form-group">
                            <label>Location</label>
                            <input class="form-control" />
                        </div>
                        <input type="submit" value="Add" class="btn btn-primary" />
                    </form>*@

                    @*<form method="post" asp-action="UploadVideo" asp-controller="App" enctype="multipart/form-data">
                            <input name="file" type="file" />
                            <input type="submit" value="Post" />
                        </form>*@
                    <form>
                        <div class="form-group">
                            <label>
                                Select a file (preferably with network throttling enabled) and check the console for status.
                            </label>
                            <input class="form-control" type="file" name="droppedFile" id="droppedFile" />
                        </div>
                        <div class="form-group">
                            <div class="progress">
                                <div id="upload-progress" class="progress-bar progress-bar-striped active" role="progressbar"
                                      aria-valuenow="85" aria-valuemin="0" aria-valuemax="100" style="min-width: 2em; width: 0%">
                                      <span id="upload-value"></span>
                                </div>
                            </div>
                        </div>
                        <input class="btn btn-primary" type="button" value="Upload" onclick="uploadFile()" />
                    </form>
                    <script src="~/js/tus.js"></script>
                    <script>

                        function uploadFile() {
                            var file = document.getElementById("droppedFile").files[0];
                            var uploadProgress = document.getElementById('upload-progress');
                            var uploadValue = document.getElementById('upload-value');
                            var upload = new tus.Upload(file,
                            {
                                endpoint: "http://localhost:8000/files/",
                                metadata: {
                                    filename: file.name,
                                },
                                onError: function (error) {
                                    console.log("Failed because: " + error);
                                },
                                onProgress: function (bytesUploaded, bytesTotal) {
                                    var percentage = (bytesUploaded / bytesTotal * 100).toFixed(2);
                                    console.log(bytesUploaded, bytesTotal, percentage + "%");
                                    uploadProgress.style.width = percentage + '%';
                                    uploadValue.innerText = percentage + '%';
                                },
                                onSuccess: function () {
                                    console.log("Download %s from %s", upload.file.name, upload.url);
                                    uploadProgress.classList.add('progress-bar-success');
                                }
                            });

                            // Start the upload
                            upload.start();
                        }

                    </script>

                </div>
            </div>

        </div>
        <div class="col-md-7">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <span>Map View:</span>
                </div>
                <div class="panel-body">
                    <my-app>
                        <div class="loader">
                            <h1>LOADING ...</h1>
                        </div>
                    </my-app>
                    <div id="map"></div>

                </div>
            </div>
        </div>
    </div>
</div>

@section scripts{
    <script src="lib/jquery/dist/jquery.js"></script>
    <script src="lib/bootstrap/dist/js/bootstrap.js"></script>
    <script>
        function initMap() {
            // Create a map object and specify the DOM element for display.
            //var map = new google.maps.Map(document.getElementById('map'), {
            //  center: {lat: -34.397, lng: 150.644},
            //  scrollwheel: false,
            //  zoom: 8
            //});
        }

    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB3nVWAP5Xv87ceDJvkeViYKcr_Un_QhSg&callback=initMap"
            type="text/javascript"></script>
    <script type="text/javascript" src="~/lib/gmaps/gmaps.js"></script>
    <script type="text/javascript" src="~/lib/travelmap/travelmap.js"></script>

    @*<script>
            (function () {
                System.config({
                    packages: {
                        'app': { defaultExtension: 'js' },
                        'lib': { defaultExtension: 'js' },
                    }
                });

                System.import('app/boot')
                    .then(null, console.error.bind(console));
            })();
        </script>*@

    <script type="text/javascript" src="~/lib/npmlibs/core-js/client/shim.min.js"></script>
    <script src="~/lib/npmlibs/zone.js/dist/zone.js"></script>
    <script src="~/lib/npmlibs/reflect-metadata/Reflect.js"></script>
    <script src="~/lib/npmlibs/systemjs/dist/system.src.js"></script>
    <script>System.packageWithIndex = true;</script>
    <!-- 2. Configure SystemJS -->
    <script src="~/js/systemjs.config.js"></script>
    <script>
        System.import('app/boot')
       .then(null, console.error.bind(console));
    </script>
}



@*<nav id="footer" class="navbar navbar-default">
        &copy; 2016 4LostKings
    </nav>*@